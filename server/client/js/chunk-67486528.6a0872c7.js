(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67486528"],{"33fc":function(t,e,i){"use strict";var r=i("a060"),a=i.n(r);a.a},"3aed":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h1",[t._v(t._s(t.id?"编辑":"新建")+"文章")]),i("el-form",{attrs:{"label-width":"50px"},nativeOn:{submit:function(e){return e.preventDefault(),t.save(e)}},model:{value:t.article,callback:function(e){t.article=e},expression:"article"}},[i("el-form-item",{attrs:{label:"标题"}},[i("el-input",{model:{value:t.article.title,callback:function(e){t.$set(t.article,"title",e)},expression:"article.title"}})],1),i("el-form-item",{attrs:{label:"标签"}},[i("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:t.article.tags,callback:function(e){t.$set(t.article,"tags",e)},expression:"article.tags"}},t._l(t.tags,function(t){return i("el-option",{key:t._id,attrs:{label:t.tag,value:t._id}})}),1)],1),i("el-form-item",{attrs:{label:"置顶"}},[i("el-radio",{attrs:{label:!0},model:{value:t.article.istop,callback:function(e){t.$set(t.article,"istop",e)},expression:"article.istop"}},[t._v("Yes")]),i("el-radio",{attrs:{label:!1},model:{value:t.article.istop,callback:function(e){t.$set(t.article,"istop",e)},expression:"article.istop"}},[t._v("No")])],1),t.id?i("el-form-item",{attrs:{label:"已上传图片","label-width":"90px"}},[i("el-image",{attrs:{src:t.article.picture,fit:"cover"}})],1):t._e(),i("el-form-item",{attrs:{label:"图片"}},[i("el-upload",{attrs:{action:t.$http.defaults.baseURL+"/upload/card_img","list-type":"picture-card",headers:t.getAuthHeaders(),"on-success":t.afterUpload,"on-remove":t.remove_img,limit:1}},[i("i",{staticClass:"el-icon-plus"})])],1),t.imgs.length?i("el-form-item",{attrs:{label:"文章图片","label-width":"77px"}},t._l(t.imgs,function(e){return i("div",{key:e,staticClass:"imgs"},[i("el-image",{attrs:{src:e,fit:"cover"}}),i("el-button",{staticClass:"el-icon-delete",attrs:{type:"danger",size:"mini"},on:{click:function(i){return t.imgDel(e)}}})],1)}),0):t._e(),i("el-form-item",{attrs:{label:"内容"}},[i("mavon-editor",{ref:"md",attrs:{codeStyle:"monokai",value:this.article.md_content},on:{imgAdd:t.$imgAdd}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("保存")])],1)],1)],1)},a=[],s=(i("96cf"),i("3b8d")),n={props:{id:{}},data:function(){return{article:{istop:!1},imgs:[],picture_url:"",tags:[]}},methods:{afterUpload:function(t){this.$set(this.article,"picture",t.url)},save:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.$set(this.article,"html_content",this.$refs.md.d_render),this.$set(this.article,"md_content",this.$refs.md.d_value),this.$set(this.article,"imgs",this.imgs),this.$set(this.article,"date",this.article.date||this.dateFormat()),this.$set(this.article,"pageviews",this.article.pageviews||1),!this.id){t.next=14;break}if(this.picture_url==this.article.picture){t.next=10;break}return e=this.img_name(this.picture_url),t.next=10,this.$http.delete("upload/del/card_img/".concat(e));case 10:return t.next=12,this.$http.put("admin/common/articles/".concat(this.id),this.article);case 12:t.next=16;break;case 14:return t.next=16,this.$http.post("admin/common/articles",this.article);case 16:this.$router.push("/admin/article-list"),this.$message({type:"success",message:"保存成功"});case 18:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),remove_img:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.img_name(this.article.picture),t.next=3,this.$http.delete("upload/del/card_img/".concat(e));case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),fetch:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("admin/common/articles/".concat(this.id));case 2:e=t.sent,this.article=e.data,this.imgs=this.article.imgs,this.picture_url=this.article.picture;case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),fetchTags:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("admin/common/tags");case 2:e=t.sent,this.tags=e.data;case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.id&&this.fetch(),this.fetchTags()}},c=n,l=(i("33fc"),i("2877")),o=Object(l["a"])(c,r,a,!1,null,"1708f3b6",null);e["default"]=o.exports},a060:function(t,e,i){}}]);
//# sourceMappingURL=chunk-67486528.6a0872c7.js.map